exports.ObjetListe_Mobile=void 0;const ObjetListeEspaceMobile_css_1=;const ObjetListe_Mobile_css_1=;const _ObjetListe_1=require("_ObjetListe");const ObjetHtml_1=require("ObjetHtml");const ObjetDonneesListe_1=require("ObjetDonneesListe");const ObjetListeElements_1=require("ObjetListeElements");const ObjetDonneesListeFlatDesign_css_1=;const Divers_css_1=;const IEHtml_Ripple_css_1=;class ObjetListe_Mobile extends _ObjetListe_1.ObjetListe{constructor(...aParams){super(...aParams);Object.assign(this.optionsInterne,{versionMobile:true,getClassListe:() =>{const lClasses=[];if(this._options.hauteurAdapteContenu&&!document.querySelector(`#${this.Nom.escapeJQ()} .${ObjetListe_Mobile_css_1.StylesObjetListe_Mobile.liste_scroll}`)){lClasses.push('hauteur-auto');} return lClasses.join(' ');},initStructureDynamique:this._initStructureDynamique.bind(this)});this.ids.zoneFils=this.idZone;this.IdPremierElement=this.idZone;this.idZoneActua=`${this.Nom}_contenu_int`;} resetOptions(){super.resetOptions();Object.assign(this._options,{nonEditable:true,forcerScrollV_mobile:null,avecCelluleEditableTriangle:true,avecCocheCheckBox:false,paddingCelluleLR:0,paddingCelluleTB:0,estBoutonCreationPiedFlottant_mobile:true});return this;} _construireAffichage(){const lHtmlEntete=this._construireBoutonsEntete();const lAvecEntete=!!lHtmlEntete;const lHtmlPiedDeListe=this._options.piedDeListe?IE.jsx.str("div",{id:this.idPiedDeListe,class:"liste-pied"}):'';const lHtmlTotal_fd=this._construireTotalFD(false,false);const lAvecScrollListe=!!(this._options.forcerScrollV_mobile===true||(this._options.forcerScrollV_mobile!==false&&(lAvecEntete||lHtmlPiedDeListe||lHtmlTotal_fd)));return(IE.jsx.str("div",{class:[ObjetListeEspaceMobile_css_1.StylesObjetListeEspaceMobile.ObjetListe],"ie-class":this.jsxGetClassListe.bind(this),"ie-node":this.jsxGetNodeListe.bind(this,this),role:"group","ie-attr":this.jsxGetAttrListe.bind(this),id:this.idZone},lHtmlEntete,lAvecScrollListe||this._options.forcerOmbreScrollTop?IE.jsx.str("div",{class:"ombre-scroll top","ie-class":lAvecEntete||this._options.forcerOmbreScrollTop?false:this.jsxGetClassNodeOmbre.bind(this)},IE.jsx.str("div",null)):'',this._construireZoneScroll(lAvecScrollListe),lHtmlTotal_fd,lHtmlPiedDeListe+this.composeWAICommun()));} _actualiserZones(aZonesActualisation,aParamsActualiser){this._initCacheLignes(aParamsActualiser);this._cache.structureWAI.lignes=[];this._cache.structureWAI.totals=[];$(`#${this.ids.cadreSelection.escapeJQ()}0`).empty();const lElement=ObjetHtml_1.GHtml.getElement(this.idZoneActua);if(lElement){ObjetHtml_1.GHtml.setHtml(lElement,this.construireZoneScrollInterne(),{controleur:this.controleur,ignorerScroll:true});} this.actualiserLignesContenusWAI();} _getTabElementsPourRsizeObserver(){return[ObjetHtml_1.GHtml.getElement(this.idZone)];} _getInfosZonesColonnes(aCache){aCache.infosZonesColonnes=[];aCache.avecScrollHorizontal=false;aCache.avecScrollHMultiZonePrevu=false;if(!this.ListeTailles){return;} const lInfos={dernierBloc:true,indiceColonneDebut:0,indiceColonneFin:this.ListeTailles.length-1,indiceBloc:aCache.infosZonesColonnes.length,estBlocFixe:false,gabaritColonnesTitre:[],colonnesVisibles:[],largeurBloc:0};for(let lColonne=lInfos.indiceColonneDebut;lColonne<=lInfos.indiceColonneFin;lColonne++){if(!aCache.tableauColonnesCachees[lColonne]){lInfos.colonnesVisibles.push(lColonne);}} if(lInfos.colonnesVisibles.length>0){lInfos.indiceColonneDebut=lInfos.colonnesVisibles[0];lInfos.indiceColonneFin=lInfos.colonnesVisibles[lInfos.colonnesVisibles.length-1];if(aCache.infosZonesColonnes.length>0){aCache.infosZonesColonnes[aCache.infosZonesColonnes.length-1].dernierBloc=false;} aCache.infosZonesColonnes.push(lInfos);}} _backupScroll(aParams){if(!aParams.conserverPositionScroll){return{scrollTop:0};} let lGetterScroll=() =>{return $('#'+this.Nom.escapeJQ()+`>.ObjetListe>div.${ObjetListe_Mobile_css_1.StylesObjetListe_Mobile.liste_scroll}`).get(0);};let lScroll=lGetterScroll();if(!lScroll){lScroll=ObjetHtml_1.GHtml.getElement(this.Nom);lGetterScroll=null;} const lScrollTrouve=ObjetHtml_1.GHtml.getParentScrollable(lScroll);if(lScrollTrouve){return{elementScrollV:lScrollTrouve,getterScroll:lScroll===lScrollTrouve?lGetterScroll:null,scrollTop:lScrollTrouve.scrollTop};} return null;} _setScroll(aBackupScroll,aSurResizeHeightContenu){if(aBackupScroll&&aBackupScroll.elementScrollV){let lElement=aBackupScroll.elementScrollV;if(aBackupScroll.getterScroll){lElement=aBackupScroll.getterScroll()||lElement;} if(lElement){lElement.scrollTop=aBackupScroll.scrollTop;}}} _initStructureDynamique(){const lCacheRef=this._cache.refresh;if(lCacheRef.avecConstructionDynamiqueContenu){let lNbLignesRestantes=this._cache.lignesVisibles.length;let lIndiceLigneDebut=0;while(lNbLignesRestantes>0){const lNbLignes=lNbLignesRestantes<lCacheRef.nbLignes?lNbLignesRestantes:lCacheRef.nbLignes;lCacheRef.structure.push({deb:lIndiceLigneDebut,fin:lIndiceLigneDebut+lNbLignes-1,nbLignes:lNbLignes,height:-1});lIndiceLigneDebut+=lNbLignes;lNbLignesRestantes=Math.max(0,lNbLignesRestantes-lNbLignes);}}} _surBtnCreation(aNodeBouton){if(this.avecBoutonCreationDansEntete()){this.surCreationEvenement(-1,{nodeBouton:aNodeBouton});} else{this.surCreationDeb(false);}} _construireTitre(){const H=[];if(!this.ListeTitres){return'';} this.ListeTitres.forEach((aTitre,aIndexLigne) =>{aTitre.forEach((aLigne,aIndice) =>{const lId=`${this.Nom}_titrecell_${aIndexLigne}_${aIndice}`;if(!this._cache.structureWAI.titres[aIndexLigne]){this._cache.structureWAI.titres[aIndexLigne]={ids:[],estLigneAIgnorer:false};} this._cache.structureWAI.titres[aIndexLigne].ids[this.getIndiceColonneVisibleDeColonne(aIndice)]=lId;const lDescripteurTitre=aLigne;H.push(IE.jsx.str("div",{class:"collection-header",id:lId,role:"columnheader"},lDescripteurTitre.getLibelleHtml?lDescripteurTitre.getLibelleHtml():lDescripteurTitre.libelleHtml?lDescripteurTitre.libelleHtml:lDescripteurTitre.estCoche?IE.jsx.str("div",{style:"position:relative; left: .4rem; width:16px; overflow:hidden;"},IE.jsx.str("ie-checkbox",{"ie-model":this.jsxGetModelCocheTitreClassique.bind(this,this,aIndice),"ie-attr":this.jsxGetAttrCocheTitreClassique.bind(this,aIndice)})):lDescripteurTitre.libelle||''));});});return H.join('');} _getClassCouleurCellule(aParamsCellule){const lDonneesTableau=this.estDonneeListeFlatDesign(this.Donnees)?null:this.Donnees;const lClassAction=(this._options.avecCelluleEditableTriangle&&lDonneesTableau&&lDonneesTableau.avecBordureDroite(aParamsCellule)?'with-action':'with-action-simple')+' '+IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple;let lClass='';if(!this._getNonEditable()&&lDonneesTableau&&(lDonneesTableau.avecEdition(aParamsCellule)||lDonneesTableau.avecEvenementEdition(aParamsCellule))){lClass=lClassAction;} const LCouleurCellule=lDonneesTableau?lDonneesTableau.getCouleurCellule(aParamsCellule):null;if((LCouleurCellule!==null&&LCouleurCellule!==undefined)){switch(LCouleurCellule){case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Blanc:return lClassAction;case ObjetDonneesListe_1.ObjetDonneesListe.ECouleurCellule.Gris:return'';default:return lClass;}} else{return lClass;}} _composeCoche(aParams){const lValeur=this.Donnees._getValeur(aParams);if(this._options.avecCocheCheckBox){return[
IE.jsx.str("div",{class:"liste_cellule_cb"},IE.jsx.str("ie-checkbox",{"ie-model":this.jsxModelCelluleCoche.bind(this,aParams.ligne,aParams.colonne,lValeur)}))
].join('');} if(lValeur===true||lValeur===ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte){return IE.jsx.str("div",{class:"Image_CocheVerte as-icon",style:"width:18px; margin:0 auto;"});} if(lValeur===ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise){return IE.jsx.str("div",{class:"IconCocheGrise as-icon",style:"width:18px; margin:0 auto;"});} return'';} _composeDeploiement(aParamsCellule){return['<i class="',(this.Donnees._estDeploye(aParamsCellule.ligne)?'icon_fleche_num_bas':'icon_fleche_num'),'"></i>'].join('');} _construireCellule(aParamsCellule,aTypeValeur,aId,aTaille){const lRoleGrid=this._estRoleTreeGrid();let lContenuAffichage={valeur:''};let lAvecDeploiementCellule=false;const lDonneesTableau=this.estDonneeListeFlatDesign(this.Donnees)?null:this.Donnees;switch(aTypeValeur){case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Coche:lContenuAffichage={valeur:this._composeCoche(aParamsCellule)};break;case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.CocheDeploiement:if(this.Donnees.estUnDeploiement(aParamsCellule)){lContenuAffichage.valeur=this._composeDeploiement(aParamsCellule);} break;case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Image:case ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon:lContenuAffichage.valeur=this.composeIconEtImage(aParamsCellule,aTypeValeur===ObjetDonneesListe_1.ObjetDonneesListe.ETypeCellule.Icon).html;break;default:lContenuAffichage=this.Donnees._getContenuAffichage(aParamsCellule);if(this._deploiementSurCellule(aParamsCellule)&&this.Donnees.avecImageSurColonneDeploiement(aParamsCellule)){lAvecDeploiementCellule=true;const lAvecEvent=!this.Donnees.avecEventDeploiementSurCellule(aParamsCellule);lContenuAffichage.valeur=[
IE.jsx.str("div",{"ie-node":lAvecEvent?this.jsxNodeDeploiementLigne.bind(this,aParamsCellule):false},this._composeDeploiement(aParamsCellule)),lContenuAffichage.valeur
].join('');}} const lClassesDIV=['liste_cellule_div','liste_contenu_ligne','liste-cellule-focusable',this.Donnees.getClass(aParamsCellule)||''
];if(lAvecDeploiementCellule){lClassesDIV.push('liste_cellule_div_depl');} let lStyleDIV='';if(!aTaille.estPourcent&&!aTaille.valeurRem){lStyleDIV='width:'+aTaille.px+'px;';} const lIndentation=(lDonneesTableau===null||lDonneesTableau===void 0?void 0:lDonneesTableau.getIndentationCellule(aParamsCellule))||0;if(lIndentation>0){lStyleDIV+='padding-left:'+lIndentation+'px;';} lStyleDIV+=this.Donnees.getStyle(aParamsCellule)||'';return[
IE.jsx.str("div",Object.assign({id:this.getIdCellule(aParamsCellule.colonne,aParamsCellule.ligne,true),class:lClassesDIV,style:lStyleDIV,"ie-nodeafter":!this.Donnees.enConstruction_cacheRechercheTexte?this.jsxNodeAfterCellule.bind(this):false,"ie-attr":!this.Donnees.enConstruction_cacheRechercheTexte?this.jsxAttrCellule.bind(this,aParamsCellule,lRoleGrid):false},this.getAttrsWAICellule(aParamsCellule)),lContenuAffichage.valeur)
].join('');} _construireContenu(){const H=[];this._cache.positionsCelluleCadreSelection={};const lCacheRef=this._cache.refresh;const lIndiceInfosColonne=0;const lInfosColonnes=this._cache.infosZonesColonnes[lIndiceInfosColonne];const lNbColonnesVisibles=lInfosColonnes.colonnesVisibles.length;const lStyles={'grid-column':`1/${lNbColonnesVisibles+1}`};if(lCacheRef.avecConstructionDynamiqueContenu){H.push(IE.jsx.str("div",{"ie-node":this.jsxNodeGabaritRefresh.bind(this,true,lIndiceInfosColonne),class:"gabarit-refresh",style:lStyles}));} H.push(this._construireContenuRange(lInfosColonnes,0));if(lCacheRef.avecConstructionDynamiqueContenu){H.push(IE.jsx.str("div",{"ie-node":this.jsxNodeGabaritRefresh.bind(this,false,lIndiceInfosColonne),class:"gabarit-refresh",style:lStyles}));} return H.join('');} _construireContenuRange(aInfosColonnes,aIndiceRange){const H=[];const lNbColonnesVisibles=aInfosColonnes.colonnesVisibles.length;const lRoleGrid=this._estRoleTreeGrid();const lNumeroLignesEntete=(this._cache.structureWAI.titres.length||0)+(this.avecTriColonne()?1:0)+(this._avecLigneCreationTitreEnLigne()?1:0);const lClasseRange=this._cache.refresh.avecConstructionDynamiqueContenu?this._getClassRange(aIndiceRange):'';let lRangeLignes;if(this._cache.refresh.avecConstructionDynamiqueContenu){lRangeLignes={debut:this._cache.refresh.structure[aIndiceRange].deb,fin:this._cache.refresh.structure[aIndiceRange].fin+1};} else{lRangeLignes={debut:0,fin:this._cache.lignesVisibles.length};} const lDonneesTableau=this.estDonneeListeFlatDesign(this.Donnees)?null:this.Donnees;const lDonneesFlatDesign=this.estDonneeListeFlatDesign(this.Donnees)?this.Donnees:null;for(let lIndiceLigne=lRangeLignes.debut;lIndiceLigne<lRangeLignes.fin;lIndiceLigne++){const lNumeroLigne=this._cache.lignesVisibles[lIndiceLigne];if((lIndiceLigne>0||aIndiceRange>0)&&!this.Donnees.enConstruction_cacheRechercheTexte&&lNbColonnesVisibles===1&&lDonneesFlatDesign&&lDonneesFlatDesign.avecSeparateurLigneHautFlatdesign&&lDonneesFlatDesign.avecSeparateurLigneHautFlatdesign(this._getParamsCellule(-1,lNumeroLigne),this._getParamsCellule(-1,lNumeroLigne-1))){H.push(IE.jsx.str("hr",{class:[ObjetDonneesListeFlatDesign_css_1.StylesObjetDonneesListeFlatDesign.liste_sepligne,lClasseRange],role:"presentation"}));} aInfosColonnes.colonnesVisibles.forEach((aNumeroColonne,aIndex) =>{const lEstDerniereColonne=aIndex+1>=lNbColonnesVisibles;const lParamsCellule=this._getParamsCellule(aNumeroColonne,lNumeroLigne);const lTypeValeur=this.Donnees.getTypeValeur(lParamsCellule);const lTaille=this._cache.taillesColonne[aNumeroColonne];const lClasses=[];let lCelluleSelectionnee=false;if(!this.Donnees.enConstruction_cacheRechercheTexte&&this.Donnees._avecSelection(lParamsCellule)){lCelluleSelectionnee=this._etatSelectionCellule({ligne:lNumeroLigne,colonne:aNumeroColonne});lClasses.push(IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple);} Object.assign(lParamsCellule,{k:0,surEdition:false,typeValeur:lTypeValeur,taille:lTaille.px});lClasses.push('collection-item','liste_celluleGrid_'+(lIndiceLigne+1),this._getClassCouleurCellule(lParamsCellule)||'',lCelluleSelectionnee?'selected':'',lClasseRange);if(!lEstDerniereColonne&&!(lDonneesTableau===null||lDonneesTableau===void 0?void 0:lDonneesTableau.avecBordureDroite(lParamsCellule))){lClasses.push('liste_sansBordureD');} const lId=this.getIdCellule(aNumeroColonne,lNumeroLigne);if(lRoleGrid){const lRowIndex=lNumeroLignesEntete+aIndex+1;const lAddLigneWAI=(aLigne,aRowIndex,aColonne,aId) =>{if(!this._cache.structureWAI.lignes[aLigne]){this._cache.structureWAI.lignes[aLigne]={ids:[],rowIndex:aRowIndex,indiceRange:this._cache.refresh.avecConstructionDynamiqueContenu?aIndiceRange:-1};} ;this._cache.structureWAI.lignes[aLigne].ids[aColonne]=aId;};lAddLigneWAI(lParamsCellule.ligne,lRowIndex,lParamsCellule.colonne,lId);} this._cache.collectionFuncConstructCellule[lParamsCellule.ligne+'_'+lParamsCellule.colonne]=this._construireCellule.bind(this,lParamsCellule,lTypeValeur,lId,lTaille);H.push(IE.jsx.str("div",{id:lId,"ie-nodeafter":!this.Donnees.enConstruction_cacheRechercheTexte?this.jsxNodeCellulePere.bind(this,lNumeroLigne,aNumeroColonne):false,class:lClasses,"ie-class":this.jsxGetClassCellulePere.bind(this,lParamsCellule)},this._cache.collectionFuncConstructCellule[lParamsCellule.ligne+'_'+lParamsCellule.colonne]()));});} let lResult=H.join('');if(this._cache.refresh.avecConstructionDynamiqueContenu&&!this.Donnees.enConstruction_cacheRechercheTexte&&lRangeLignes.fin>lRangeLignes.debut){lResult=IE.jsx.str(IE.jsx.fragment,null,IE.jsx.str("div",{class:lClasseRange,style:'height:0; grid-column:1/'+(lNbColonnesVisibles+1)+';',"ie-nodeafter":this.jsxNodeObsRange.bind(this,true,aIndiceRange,aInfosColonnes.indiceBloc),role:"presentation"}),lResult,IE.jsx.str("div",{class:lClasseRange,style:'height:0; grid-column:1/'+(lNbColonnesVisibles+1)+';',"ie-nodeafter":this.jsxNodeObsRange.bind(this,false,aIndiceRange,aInfosColonnes.indiceBloc),role:"presentation"}));} return lResult;} _construireTotal(){const lDonneesTableau=this.estDonneeListeFlatDesign(this.Donnees)?null:this.Donnees;const lListeTotal=lDonneesTableau?lDonneesTableau.getListeLignesTotal():null;if(!this._options.avecLigneTotal&&(!lListeTotal||lListeTotal.count()===0)){return'';} const H=[];const lLignes=(lDonneesTableau?lDonneesTableau.getListeLignesTotal():null)||new ObjetListeElements_1.ObjetListeElements().addElement(null);const lInfosColonnes=this._cache.infosZonesColonnes[0];lLignes.parcourir((aArticle,aIndexLigne) =>{let lFusions=null;if(lDonneesTableau){lFusions=this._getFusionColonnesCellule({total:true,getParamsCellule:(aNumeroColonne) =>{return this._getParamsCellule(aNumeroColonne,-1,{surTotal:true,ligne:aIndexLigne,article:aArticle});},colonnesVisibles:lInfosColonnes.colonnesVisibles,indiceColonneDebut:lInfosColonnes.indiceColonneDebut,indiceColonneFin:lInfosColonnes.indiceColonneFin,dernierBloc:true});} let lIndiceColonne=0;lInfosColonnes.colonnesVisibles.forEach((aNumeroColonne) =>{if(lFusions&&(!lFusions[aNumeroColonne]||!lFusions[aNumeroColonne].nbCol)){return;} lIndiceColonne+=1;const lParams=this._getParamsCellule(aNumeroColonne,-1,{surTotal:true});if(aArticle){lParams.ligne=aIndexLigne;lParams.article=aArticle;} let lContenu='';let lClassLi='';let lGridColumn='';let lStyle;if(lDonneesTableau){lParams.typeCellule=lDonneesTableau.getTypeCelluleTotal(lParams);const lAvecBordureTotalVisible=lDonneesTableau.avecBordureTotalVisible(lParams);if(lFusions[aNumeroColonne]&&lFusions[aNumeroColonne].nbCol>1){lGridColumn='grid-column:'+lIndiceColonne+' / '+(lIndiceColonne+lFusions[aNumeroColonne].nbCol)+';';} lStyle=lGridColumn+(lDonneesTableau._getStyleTotal(lParams)||'');lClassLi='collection-item liste_ligne_total '+(lDonneesTableau.getClassTotal(lParams)||'');if(!lAvecBordureTotalVisible){lClassLi+=' liste_sansBordureD';} lContenu=lDonneesTableau.getContenuTotal(lParams);} const lNodeCelluleTotal=(aNode) =>{const lEventMapCelluleTd={click:this._surClickCelluleTotal};const lData={instance:this};$(aNode).on(lEventMapCelluleTd,lData);};const lIdCellule=this.getIdCelluleTotal(lParams.colonne,lParams.ligne,false);if(!this._cache.structureWAI.totals[aIndexLigne]){this._cache.structureWAI.totals[aIndexLigne]=[];} this._cache.structureWAI.totals[aIndexLigne].push(lIdCellule);H.push(IE.jsx.str("div",{id:lIdCellule,"ie-node":lNodeCelluleTotal,class:['liste_cellule_total',lClassLi,lParams.typeCellule===ObjetDonneesListe_1.ObjetDonneesListe.typeCelluleTotal.defaut?Divers_css_1.StylesDivers.focusVisibleContrasted:''],style:lStyle||false,role:"gridcell"},IE.jsx.str("div",{class:"liste_cellule_div"},lContenu)));});});return H.join('');} _getStyleGridColumn(){const H=[];const lNbColonnesVisibles=this._cache.infosZonesColonnes[0].colonnesVisibles.length;this._cache.infosZonesColonnes[0].colonnesVisibles.forEach((aNumeroColonne,aIndex) =>{const lTaille=this._cache.taillesColonne[aNumeroColonne];let lStyle='';if(lTaille.estPourcent){lStyle='minmax(1rem, '+(lTaille.pourcent/100)+'fr)';} else{const lEstDerniereColonne=aIndex+1>=lNbColonnesVisibles;lStyle=(lTaille.px+8+(lEstDerniereColonne?0:1))+'px';} H.push(lStyle);});return H.length>0?'grid-template-columns:'+H.join(' ')+';':'';} _contruireBouton(aIcon,aLibelle,aAttrs){return(IE.jsx.str("button",Object.assign({class:['btn-float',IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRipple,IEHtml_Ripple_css_1.StylesIEHtmlRipple.ieRippleClaire]},aAttrs,{"aria-label":aLibelle||false,title:aLibelle||false}),IE.jsx.str("i",{class:aIcon,role:"presentation"})));} _construireBoutons(){const H=[];const lHtmlBoutons=[];const lAvecCreation=this._options.estBoutonCreationPiedFlottant_mobile&&this._avecLigneCreationTitre();this._getTabBoutonsEnteteOuPiedFD(false).forEach((aInfoBouton) =>{const lBouton=aInfoBouton.bouton;lHtmlBoutons.push(this._contruireBouton(lBouton.class,lBouton.title,{'ie-attr':(aNode) =>{if(lBouton.getDisabled){return{disabled:lBouton.getDisabled({bouton:lBouton,node:aNode,liste:this})};}},'ie-node':(aNode) =>{if(lBouton.event){const lThis=this;$(aNode).eventValidation(function(aEvent){const lParams={bouton:lBouton,event:aEvent,liste:lThis,node:this};lBouton.event(lParams);});}}}));});if(lAvecCreation){const lParams=this._getParamsCellule(-1,-1,{surCreation:true});const lAvecInputFile=this.Donnees.avecSelecFile(lParams);const lAttr=lAvecInputFile?{'ie-model':this.jsxModeleSelecFile.bind(this,this,lParams),'ie-selecfile':true} :{'ie-node':(aNode) =>{const lThis=this;$(aNode).eventValidation(function(){lThis._surBtnCreation(this);});}};const H=this._contruireBouton(this._options.iconeTitreCreation||'icon_plus_fin',this._options.titreCreation,lAttr);if(this._options.skin===_ObjetListe_1.ObjetListe.skin.flatDesign){lHtmlBoutons.push(H);} else{lHtmlBoutons.splice(0,0,H);}} if(lHtmlBoutons.length>0){H.push(IE.jsx.str(IE.jsx.fragment,null,IE.jsx.str("div",{class:"liste_separateur_boutons"}),IE.jsx.str("section",{class:"liste_boutons"},lHtmlBoutons.join(''))));} return H.join('');} _construireZoneScroll(aAvecScrollListe){let lResult=IE.jsx.str(IE.jsx.fragment,null,IE.jsx.str("div",{id:this.ids.cadreSelection+'0',class:"liste_conteneurCadreSelection",role:"presentation"}),this._construireFiltres(),this._construireTotalFD(true,true),IE.jsx.str("div",{id:this.idZoneActua,class:['collection','with-header',_ObjetListe_1.ObjetListe.SelecteurCss.focusGrid],role:this._estRoleTreeGrid()?'presentation':'tree',style:this._getStyleGridColumn(),tabindex:"0","ie-node":this.jsxGetNodePremierElementMobile.bind(this)},this.construireZoneScrollInterne()),this._construireTotalFD(false,true),this._construireBoutons());if(this._estRoleTreeGrid()){lResult+=this.construireGridWAI(false,false);} if(aAvecScrollListe){lResult=IE.jsx.str("div",{class:ObjetListe_Mobile_css_1.StylesObjetListe_Mobile.liste_scroll,role:"presentation"},lResult);} if(this._options.forcerOmbreScrollBottom||aAvecScrollListe){lResult+=IE.jsx.str("div",{class:"ombre-scroll bottom",role:"presentation","ie-class":this._options.forcerOmbreScrollBottom?false:this.jsxGetClassNodeOmbre.bind(this)},IE.jsx.str("div",null));} return lResult;} jsxGetNodePremierElementMobile(aNode){this.jsxGetNodePremierElement(this,aNode);$(aNode).on(this.getEventMapCelluleFocusable(),'div.collection-item:not(:has(.Liste_Input_Texte))',{instance:this});} construireZoneScrollInterne(){return this._construireTitre()+this._construireContenu()+this._construireTotal()+(this._cache.lignesVisibles.length===0&&this._options.messageContenuVide?IE.jsx.str("div",{class:ObjetListe_Mobile_css_1.StylesObjetListe_Mobile.liste_messageVide,role:this._estRoleTreeGrid()?'gridcell':'treeitem'},this._options.messageContenuVide,IE.jsx.str("div",{class:"m-top-xl Image_No_Data","aria-hidden":"true"})):'');} jsxNodeCellulePere(aLigne,aColonne,aNode){const lThis=this;const lEventMapCellulePere={mousedown(aEvent){lThis._surEventDownLigne({event:aEvent,ligne:aLigne,colonne:aColonne});},click(aEvent){if(lThis._estEventSansSelect(aEvent)){return;} lThis._editionDebSurSelection(aColonne,aLigne,aEvent);if(lThis.estDonneeListeFlatDesign(lThis.Donnees)&&lThis.Donnees.options.avecCocheCBSurLigne){lThis._modifierCBLigneFlatDesign(lThis._getParamsCellule(aColonne,aLigne));}},keyup:this._surKeyUpCellulePere};$(aNode).on(lEventMapCellulePere,{instance:this});} jsxGetClassNodeOmbre(aNode){const lNode=$(`#${this.Nom.escapeJQ()} .${ObjetListe_Mobile_css_1.StylesObjetListe_Mobile.liste_scroll}`).get(0);if(lNode&&lNode.clientHeight<lNode.scrollHeight){aNode.classList.remove('hide');} else{aNode.classList.add('hide');} return'';} jsxModelCelluleCoche(aNumeroLigne,aNumeroColonne,aValeur){return{getValue(){return aValeur===true||aValeur===ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Verte;},getIndeterminate(){return aValeur===ObjetDonneesListe_1.ObjetDonneesListe.EGenreCoche.Grise;},setValue(){},getDisabled:() =>{if(this._getNonEditable()){return true;} const lParamsCellule=this._getParamsCellule(aNumeroColonne,aNumeroLigne);return!this.Donnees.avecEdition(lParamsCellule);}};}} exports.ObjetListe_Mobile=ObjetListe_Mobile;